// This file is part of Indico.
// Copyright (C) 2002 - 2024 CERN
//
// Indico is free software; you can redistribute it and/or
// modify it under the terms of the MIT License; see the
// LICENSE file for more details.

@use './variables';
@use './utils';
@use './layout';
@use './visibility';
@use 'partials/icons';

%reset-select-list-style {
  // FIXME: This is an override for the SUI styles, should not be needed
  color: inherit;
  font: inherit;
  outline: revert;
  padding: 0;
  background: default;
}

%form-label {
  @extend %reset-font-and-color;
  font-weight: bold;
}

%form-label-block {
  @extend %form-label;
  display: block;
  margin-bottom: 0.5em;
}

%select-list {
  width: 100%;
  border: 1px solid var(--control-border-color);
  border-radius: var(--control-border-radius);

  option:not(:checked):hover {
    background: var(--control-clickable-surface-color);
  }

  option:checked {
    background: var(--control-alt-clickable-surface-color);
    color: var(--control-alt-text-color);
  }
}

%checkbox {
  @extend %flex-inline-center;
  appearance: none;
  width: 1.5em;
  height: 1.5em;
  background: var(--control-indented-bg-color);
  border: 1px solid var(--control-clickable-border-color);
  border-radius: var(--control-border-radius);

  &:checked {
    background: var(--control-alt-clickable-surface-color);
    color: var(--control-alt-text-color);
  }

  &:focus-visible:not(:checked) {
    background: var(--control-clickable-surface-focus-color);
  }

  &:focus-visible:checked {
    background: var(--control-alt-clickable-surface-focus-color);
  }

  &:disabled {
    background: var(--control-disabled-indented-bg-color);
    color: var(--control-disabled-text-color);
    border-color: var(--control-disabled-border-color);
  }

  &:checked::before {
    @extend %icon;
    @extend %icon-checkmark;
  }
}

%input-with-icon {
  // XXX: placed on the label that wraps the input and an icon
  @extend %flex-row;
  position: relative;
  line-height: 1.1;

  span {
    @extend %visually-hidden;
  }

  input {
    width: 100%;
    padding: var(--control-padding);
    padding-right: calc(var(--control-padding) * 2 + 1em);
  }

  &::after {
    @extend %icon;
    position: absolute;
    right: var(--control-padding);
  }
}

%radio-control-subgroup {
  @extend %flex-row;
  --flex-wrap: nowrap;
  align-items: flex-start;
  padding: var(--container-padding);
  border: 2px solid var(--subgroup-border-color);
  border-radius: var(--control-border-radius);

  &:has([type='radio']:checked) {
    border-color: var(--subgroup-highlight-border-color);
    color: var(--subgroup-highlight-text-color);
    background: var(--subgroup-highlight-surface-color);
  }
}
